<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
  <title>Pathfinder</title>
  <link rel="icon" type="image/gif" href="images/favicon.gif" />
  <link rel="stylesheet" href="style.css">
  <!-- <script src="script.js"></script> -->
</head>
<body>
<table id="onglets" style="width: 100%;">
   <tr>
       <td id="ongletFP" style="width: 50%;border: 1px solid black;" onClick="change('fp')">fichee perso</td>
       <td id="ongletReglage" style="width: 50%;" onClick="change('reglage')">reglages</td>
   </tr>
</table>
<span id="reglage">
<button id="add" onClick="addLine()">Ajouter</button>
<form>
  <table id="table" >
   <tr>
       <td>Nom</td>
       <td>Valeur</td>
       <td>Effet</td>
	   <td>Rattachement</td>
   </tr>
   <tr>
       <td><input type='text' name='nom' id='nom0' size='10'/></td>
       <td><input class="number" type='number' name='valeur' id='valeur0' size='3' /></td>
       <td><select name='effet' id='effet0'>
			<optgroup label='Caractéristiques'>
				<option value='for'>Force</option>
				<option value='dex'>Dextérité</option>
				<option value='con'>Constitution</option>
				<option value='int'>Intelligence</option>
				<option value='sag'>Sagesse</option>
				<option value='cha'>Charisme</option>
			</optgroup>
			<optgroup label='Attaque'>
				<option value='bba'>BBA</option>
				<option value='cac'>CàC</option>
				<option value='dist'>Distance</option>
				<option value='BMC'>BMC</option>
			</optgroup>
			<optgroup label='Défense'>
				<option value='catot'>CA Totale</option>
				<option value='cacon'>CA de contact</option>
				<option value='casur'>CA surpris</option>
				<option value='pv'>PV</option>
			</optgroup>
       </select></td>
       <td><select name='rattachement' id='rattachement0' >
			<option value='None'>Aucun</option>
       </select></td>
   </tr>
</table>
</form>

</span>
<span id="fp" style="display:none">
ok
</span>
</body>
</html>
<script>
	var nb_lignes=1;
	var effects= new Array();
	effects["Caractéristiques"]=new Array(new Array('for','Force'),new Array('dex','Dextérité'),new Array('con','Constitution'),new Array('int','Intelligence'),new Array('sag','Sagesse'),new Array('cha','Charisme'))
	effects["Attaque"]=new Array(new Array('bba','BBA'),new Array('cac','CàC'),new Array('dist','Distance'),new Array('BMC','BMC'))
	effects["Défense"]=new Array(new Array('catot','CA Totale'),new Array('cacon','CA de contact'),new Array('casur','CA surpris'),new Array('pv','PV'))
	function test(value){
		document.getElementById("valeur").value=value;
	}
	
	function newEffect(num){
		nouveauEffect= document.createElement('select');
		nouveauEffect.name='Effet';
		nouveauEffect.id='Effet'+num;
		var nouveauOptGroup;
		var nouveauOption;
		for(var indice in effects){
			nouveauOptGroup=document.createElement('optgroup');
			nouveauOptGroup.label=indice;
			for (var i in effects[indice]){
				nouveauOption=document.createElement('option');
				nouveauOption.value=effects[indice][i][0];
				nouveauOption.innerHTML=effects[indice][i][1];
				nouveauOptGroup.appendChild(nouveauOption);
			}
			
			nouveauEffect.appendChild(nouveauOptGroup);
		}
		return nouveauEffect;
	}
	
	function addLine(){
		var table=document.getElementById("table");
		var row=table.insertRow(1);
		
		var cell0=row.insertCell(0);
		var cell1=row.insertCell(1);
		var cell2=row.insertCell(2);
		var cell3=row.insertCell(3);
		
		var nouveauInput= document.createElement('input');
		nouveauInput.name = 'nom';
		nouveauInput.id = 'nom'+nb_lignes;
		nouveauInput.type = 'text';
		nouveauInput.size = 10;
		cell0.appendChild(nouveauInput);
		
		nouveauInput= document.createElement('input');
		nouveauInput.classList.add('number');
		nouveauInput.name = 'valeur';
		nouveauInput.id = 'valeur'+nb_lignes;
		nouveauInput.type = 'number';
		cell1.appendChild(nouveauInput);
		
		
		nouveauInput=newEffect(nb_lignes);
		cell2.appendChild(nouveauInput);
		
		nouveauInput=document.createElement('select');
		nouveauInput.name='rattachement';
		nouveauInput.id='rattachement'+nb_lignes;
		nouveauOption=document.createElement('option');
		nouveauOption.value='None';
		nouveauOption.innerHTML="Aucun";
		
		nouveauInput.appendChild(nouveauOption);
		
		cell3.appendChild(nouveauInput);
		
		
		nb_lignes++;
	}
	
	function change(visible){
		if (visible=="fp"){
			document.getElementById("reglage").style.display="none";
			document.getElementById("fp").style.display="inline";		
			document.getElementById("ongletReglage").style.border="1px solid black";
			document.getElementById("ongletFP").style.border="0px";	
			visible="fp"
		}
		else{
			document.getElementById("fp").style.display="none";
			document.getElementById("reglage").style.display="inline";	
			document.getElementById("ongletFP").style.border="1px solid black";
			document.getElementById("ongletReglage").style.border="0px";	
			visible="reglage"
		}
	}
	
</script>
